; -- MegaTunix.iss --
;SUFFIX=@MTX_VER_STRING@

[Messages]
WinVersionTooLowError=MegaTunix requires Windows XP or newer!  You have %1 %2

[Setup]
AppName=MegaTunix
AppVerName=MegaTunix v. @MTX_VER_STRING@
DefaultDirName={pf}\MegaTunix
DefaultGroupName=MegaTunix
UninstallDisplayIcon={app}\megatunix.exe
Compression=lzma
; XP or newer ONLY
MinVersion=0,5.0.9999
;Compression=zip
SolidCompression=yes
; Page 0: Initial setup. Disable with DisableStartupPrompt
DisableStartupPrompt=Yes
; Page 3: License Agreement.  Shown if LicenseFile is set.
; Users may proceed to the next page only if the option
; "I accept the agreement" is selected.
LicenseFile=.\LICENSE
; Page 5: Information.  Shown if InfoBeforeFile is set. Name the file
; to make it easy to recognise
InfoBeforeFile=.\WIN_NOTES.txt
; Forces open apps to detect environment var change
ChangesEnvironment=yes

[Files]
Source: "z:\opt\crosstools32\i686-w32-mingw32\lib\libgcc_s_sjlj-1.dll"; DestDir: "{app}"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crosstools32\i686-w32-mingw32\lib\libstdc++-6.dll"; DestDir: "{app}"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\lib\gtk-2.0\2.10.0\engines\*.dll"; DestDir: "{app}\lib\gtk-2.0\2.10.0\engines"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\lib\gtk-2.0\2.10.0\immodules\*.dll"; DestDir: "{app}\lib\gtk-2.0\2.10.0\immodules"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\lib\gtk-2.0\modules\*.dll"; DestDir: "{app}\lib\gtk-2.0\modules"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\lib\gdk-pixbuf-2.0\2.10.0\loaders\*.dll"; DestDir: "{app}\lib\gdk-pixbuf-2.0\2.10.0\loaders"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\lib\pango\1.6.0\modules\*.dll"; DestDir: "{app}\lib\pango\1.6.0\modules"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*atk*.dll"; DestDir: "{app}"; Flags: ignoreversion
;Source: "z:\opt\crossroot32_dbg\bin\*bz2*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*cairo*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*charset*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*dbus*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*expat*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*ffi*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*font*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*free*.dll"; DestDir: "{app}"; Flags: ignoreversion
;Source: "z:\opt\crossroot32_dbg\bin\*harfbuzz*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*iconv*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*intl*.dll"; DestDir: "{app}"; Flags: ignoreversion
;Source: "z:\opt\crossroot32_dbg\bin\*jpeg*.dll"; DestDir: "{app}"; Flags: ignoreversion
;Source: "z:\opt\crossroot32_dbg\bin\*lzma*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*libg*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*pango*.dll"; DestDir: "{app}"; Flags: ignoreversion
;Source: "z:\opt\crossroot32_dbg\bin\*pcre*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*pixman*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*png*.dll"; DestDir: "{app}"; Flags: ignoreversion
;Source: "z:\opt\crossroot32_dbg\bin\*tiff*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*xml2*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\bin\*zlib*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\etc\*.*"; DestDir: "{app}\etc"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\share\themes\*.*"; DestDir: "{app}\share\themes"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\share\locale\de\*.*"; DestDir: "{app}\share\locale\de"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\share\locale\es\*.*"; DestDir: "{app}\share\locale\es"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\share\locale\fi\*.*"; DestDir: "{app}\share\locale\fi"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\opt\crossroot32_dbg\share\locale\fr\*.*"; DestDir: "{app}\share\locale\fr"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "z:\tmp\mtx_win32_dbg\bin\*.*"; DestDir: "{app}"; Flags: ignoreversion
Source: "z:\@CWD@\widgets\.libs\*.exe"; DestDir: "{app}"; Flags: ignoreversion
;Source: "z:\@CWD@\win_support\loaders.cache32"; DestDir: "{app}\lib\gdk-pixbuf-2.0\2.10.0\"; DestName: "loaders.cache"; Flags: ignoreversion
;Source: "z:\@CWD@\win_support\pango.modules32"; DestDir: "{app}\etc\pango\"; DestName: "pango.modules"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\lib\gdk-pixbuf-2.0\2.10.0\loaders.cache"; DestDir: "{app}\lib\gdk-pixbuf-2.0\2.10.0\"; DestName: "loaders.cache"; Flags: ignoreversion
Source: "z:\opt\crossroot32_dbg\etc\pango\pango.modules"; DestDir: "{app}\etc\pango\"; DestName: "pango.modules"; Flags: ignoreversion
Source: "z:\tmp\mtx_win32_dbg\share\MegaTunix\*.*"; DestDir: "{app}\dist\"; Flags: recursesubdirs createallsubdirs ignoreversion

[Icons]
Name: "{group}\MegaTunix"; Filename: "{app}\MegaTunix.exe"; WorkingDir: "{app}"
Name: "{group}\MegaTunix MS1 Fullscreen Dash"; Filename: "{app}\MegaTunix.exe";Parameters:" -p ms1 -D Default_Dash -F -rsmq"; WorkingDir: "{app}"
Name: "{group}\MegaTunix for MS1 Autodetect"; Filename: "{app}\MegaTunix.exe";Parameters:" -p ms1"; WorkingDir: "{app}"
Name: "{group}\MegaTunix MS2 Fullscreen Dash"; Filename: "{app}\MegaTunix.exe";Parameters:" -p ms2 -D Default_Dash -F -rsmq"; WorkingDir: "{app}"
Name: "{group}\MegaTunix for MS2 Autodetect"; Filename: "{app}\MegaTunix.exe";Parameters:" -p ms2 "; WorkingDir: "{app}"
Name: "{group}\MegaTunix for FreeEMS Autodetect"; Filename: "{app}\MegaTunix.exe";Parameters:" -p freeems -q "; WorkingDir: "{app}"
Name: "{group}\MtxGaugeDesigner"; Filename: "{app}\gaugedesigner.exe"; WorkingDir: "{app}"
Name: "{group}\MtxDashDesigner"; Filename: "{app}\dashdesigner.exe"; WorkingDir: "{app}"
Name: "{group}\MtxLoader"; Filename: "{app}\mtxloader.exe"; WorkingDir: "{app}"
Name: "{userdesktop}\MegaTunix @MTX_VER_STRING@"; Filename: "{app}\MegaTunix.exe"; WorkingDir: "{app}"
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\MegaTunix"; Filename: "{app}\MegaTunix.exe"; WorkingDir: "{app}"

[Registry]
; Megatunix itself
 ; Magic stuff that makes the GL windows work
